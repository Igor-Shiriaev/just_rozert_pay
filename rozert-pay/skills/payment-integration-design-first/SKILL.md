---
name: payment-integration-design-first
description: Использовать для новых и изменяемых платежных интеграций, где перед правками кода обязательно требуется подтвержденный дизайн-документ.
---

# Проектирование Перед Разработкой Для Платежных Интеграций

Используй этот навык для задач по платежным интеграциям (новый провайдер, изменения флоу, изменения callback/статусов).

## Порядок работы

1. Прочитать `docs/agents/payment-integration-playbook.md`.
2. Создать/обновить дизайн-документ интеграции в `docs/integrations/<integration_name>/design.md`.
3. Показать разработчику план и краткое резюме дизайна.
4. Дождаться явного подтверждения.
5. Только после подтверждения вносить изменения в код.
6. Добавить happy path-тесты для `deposit` и `withdraw`.
7. Для внешних HTTP-моков использовать только `requests_mock`.
8. Обновить дизайн/контекстный документ итоговыми примечаниями по реализации.

## Жесткие ограничения

- Никаких правок кода до утвержденного дизайн-документа.
- Не хранить секреты в коде/документации/тестах.
- Держать моки минимальными и переиспользуемыми.
