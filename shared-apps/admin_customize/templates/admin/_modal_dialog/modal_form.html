<div id="content-main"
     hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
>
  {% if back_url %}
    <p class="form-row">
      <a class="back_button" href="{{ back_url }}">Back</a>
    </p>
  {% endif %}
  <form hx-post="{{ form_post_url }}"
        enctype="multipart/form-data"
  >
    {% csrf_token %}
    {% if form.non_field_errors|length > 0 %}
      <p class="errornote">
        "Please correct the errors below."
      </p>
      {{ form.non_field_errors }}
    {% endif %}
    <input type="hidden" name="action" value="{{ form.action }}">
    <input type="hidden" name="do_action" value="yes">
    <fieldset class="module aligned">
      {% if form.has_fieldsets %}
        {% include 'admin/forms/inline_form_row.html' with fieldsets=form.fieldsets %}
      {% else %}
        {% include 'admin/forms/regular_form_row.html' with form=form %}
      {% endif %}
    </fieldset>
    <div class="submit-row">
      <input
          type="submit"
          name="apply"
          class="default"
          value="{% if confirming_action %}Confirm
                {{ confirming_action }}{% else %}Submit{% endif %}"
      >
    </div>
    {% if queryset %}
      <div>
        <p>Objects to be processed:</p>
        <ul>{% for obj in queryset %}
          <li><input type="hidden" name="_selected_action" value="{{ obj.pk }}">{{ obj }}</li>
        {% endfor %}</ul>
      </div>
    {% endif %}
  </form>
  {% block additional_data %}{% endblock %}
</div>